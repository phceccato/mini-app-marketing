<!-- Flex container with left drop zone and right image -->
<div class="upload-container">
  <!-- Left: Upload box -->
  <div class="upload-left">
    <h2>Upload de Romaneios</h2>

    <div 
      class="drop-zone" 
      [class.dragging]="isDragging"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
    >
      Arraste os arquivos aqui ou
      <label class="custom-file-upload">
        <input type="file" multiple (change)="onFileSelected($event)" hidden>
        Escolher arquivos
      </label>
    </div>

    <button 
      (click)="enviarArquivos()" 
      *ngIf="selectedFiles.length > 0">
      Enviar
    </button>

    <ul>
      <li *ngFor="let file of selectedFiles; let i = index">
        {{ file.name }}
        <span 
          (click)="removerArquivo(i)" 
          style="color: red; cursor: pointer; margin-left: 8px;"
          title="Remover">
          &times;
        </span>
      </li>
    </ul>

    <p *ngIf="mensagem" style="color: red;">{{ mensagem }}</p>
    <p *ngIf="carregando">Carregando...</p>
    <p *ngIf="erro" style="color: red;">{{ erro }}</p>
  </div>

  <!-- Right: Logo image -->
  <div class="upload-right">
    <img 
      src="assets/img.webp" 
      alt="Logo superior direito deslocado"
    >
  </div>
</div>

<!-- Extracted data table -->
<div *ngIf="dadosExtraidos.length > 0">
  <h3>Dados extraídos:</h3>
  <table border="1">
    <thead>
      <tr>
        <th>Data</th>
        <th>Produtor/Fazenda</th>
        <th>Cultura</th>
        <th>Peso Bruto</th>
        <th>Umidade</th>
        <th>Impureza</th>
        <th>Peso Líquido</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of dadosExtraidos">
        <td>{{ item.data }}</td>
        <td>{{ item.nomeProdutor | uppercase }}</td>
        <td>{{ item.tipoCultura | uppercase }}</td>
        <td>{{ item.pesoBruto }}</td>
        <td>{{ item.umidade }}</td>
        <td>{{ item.impureza }}</td>
        <td>{{ item.pesoLiquido }}</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Review component -->
<app-review
  *ngIf="dadosExtraidos.length > 0"
  [data]="dadosExtraidos"
  [dataId]="dataId"
  (aoFinalizar)="limparTela()">
</app-review>
